// Modulo de memoria de programa 
module dmem(input clk, mem_write,
				input  [8:0] addr, vaddr, 
				input  [7:0] write_data,
				output [7:0] read_data,
				output [7:0] vdata);

  reg [7:0] RAM[1024:0];

  initial
  begin
    RAM[0] =	8'b00000000;
    RAM[1] =	8'hf;
    RAM[2] =	8'b00000000;
    RAM[3] =	8'b00000000;
    RAM[4] =	8'b00000000;
    RAM[5] =	8'b00000000;
    RAM[6] =	8'b00000000;
    RAM[7] =	8'b00000000;
    RAM[8] =	8'b00000000;
    RAM[9] =	8'b00000000;
    RAM[10] =	8'b00000000;
    RAM[11] =	8'b00000000;
    RAM[12] =	8'b00000000;
    RAM[13] =	8'b00000000;
    RAM[14] =	8'b00000000;
    RAM[15] =	8'b00000000;
    RAM[16] =	8'b00000000;
    RAM[17] =	8'b00000000;
    RAM[18] =	8'b00000000;
    RAM[19] =	8'b00000000;
    RAM[20] =	8'b00000000;
    RAM[21] =	8'b00000000;
    RAM[22] =	8'b00000000;
    RAM[23] =	8'b00000000;
    RAM[24] =	8'b00000000;
    RAM[25] =	8'b00000000;
    RAM[26] =	8'b00000000;
    RAM[27] =	8'b00000000;
    RAM[28] =	8'b00000000;
    RAM[29] =	8'b00000000;
    RAM[30] =	8'b00000000;
    RAM[31] =	8'b00000000;
    RAM[32] =	8'b00000000;
    RAM[33] =	8'b00000000;
    RAM[34] =	8'b00000000;
    RAM[35] =	8'b00000000;
    RAM[36] =	8'b00000000;
    RAM[37] =	8'b00000000;
    RAM[38] =	8'b00000000;
    RAM[39] =	8'b00000000;
    RAM[40] =	8'b00000000;
    RAM[41] =	8'b00000000;
    RAM[42] =	8'b00000000;
    RAM[43] =	8'b00000000;
    RAM[44] =	8'b00000000;
    RAM[45] =	8'b00000000;
    RAM[46] =	8'b00000000;
    RAM[47] =	8'b00000000;
    RAM[48] =	8'b00000000;
    RAM[49] =	8'b00000000;
    RAM[50] =	8'b00000000;
    RAM[51] =	8'b00000000;
    RAM[52] =	8'b00000000;
    RAM[53] =	8'b00000000;
    RAM[54] =	8'b00000000;
    RAM[55] =	8'b00000000;
    RAM[56] =	8'b00000000;
    RAM[57] =	8'b00000000;
    RAM[58] =	8'b00000000;
    RAM[59] =	8'b00000000;
    RAM[60] =	8'b00000000;
    RAM[61] =	8'b00000000;
    RAM[62] =	8'b00000000;
    RAM[63] =	8'b00000000;
    RAM[64] =	8'b00000000;
    RAM[65] =	8'b00000000;
    RAM[66] =	8'b00000000;
    RAM[67] =	8'b00000000;
    RAM[68] =	8'b00000000;
    RAM[69] =	8'b00000000;
    RAM[70] =	8'b00000000;
    RAM[71] =	8'b00000000;
    RAM[72] =	8'b00000000;
    RAM[73] =	8'b00000000;
    RAM[74] =	8'b00000000;
    RAM[75] =	8'b00000000;
    RAM[76] =	8'b00000000;
    RAM[77] =	8'b00000000;
    RAM[78] =	8'b00000000;
    RAM[79] =	8'b00000000;
    RAM[80] =	8'b00000000;
    RAM[81] =	8'b00000000;
    RAM[82] =	8'b00000000;
    RAM[83] =	8'b00000000;
    RAM[84] =	8'b00000000;
    RAM[85] =	8'b00000000;
    RAM[86] =	8'b00000000;
    RAM[87] =	8'b00000000;
    RAM[88] =	8'b00000000;
    RAM[89] =	8'b00000000;
    RAM[90] =	8'b00000000;
    RAM[91] =	8'b00000000;
    RAM[92] =	8'b00000000;
    RAM[93] =	8'b00000000;
    RAM[94] =	8'b00000000;
    RAM[95] =	8'b00000000;
    RAM[96] =	8'b00000000;
    RAM[97] =	8'b00000000;
    RAM[98] =	8'b00000000;
    RAM[99] =	8'b00000000;
    RAM[100] =	8'b00000000;
    RAM[101] =	8'b00000000;
    RAM[102] =	8'b00000000;
    RAM[103] =	8'b00000000;
    RAM[104] =	8'b00000000;
    RAM[105] =	8'b00000000;
    RAM[106] =	8'b00000000;
    RAM[107] =	8'b00000000;
    RAM[108] =	8'b00000000;
    RAM[109] =	8'b00000000;
    RAM[110] =	8'b00000000;
    RAM[111] =	8'b00000000;
    RAM[112] =	8'b00000000;
    RAM[113] =	8'b00000000;
    RAM[114] =	8'b00000000;
    RAM[115] =	8'b00000000;
    RAM[116] =	8'b00000000;
    RAM[117] =	8'b00000000;
    RAM[118] =	8'b00000000;
    RAM[119] =	8'b00000000;
    RAM[120] =	8'b00000000;
    RAM[121] =	8'b00000000;
    RAM[122] =	8'b00000000;
    RAM[123] =	8'b00000000;
    RAM[124] =	8'b00000000;
    RAM[125] =	8'b00000000;
    RAM[126] =	8'b00000000;
    RAM[127] =	8'b00000000;
    RAM[128] =	8'b00000000;
    RAM[129] =	8'b00000000;
    RAM[130] =	8'b00000000;
    RAM[131] =	8'b00000000;
    RAM[132] =	8'b00000000;
    RAM[133] =	8'b00000000;
    RAM[134] =	8'b00000000;
    RAM[135] =	8'b00000000;
    RAM[136] =	8'b00000000;
    RAM[137] =	8'b00000000;
    RAM[138] =	8'b00000000;
    RAM[139] =	8'b00000000;
    RAM[140] =	8'b00000000;
    RAM[141] =	8'b00000000;
    RAM[142] =	8'b00000000;
    RAM[143] =	8'b00000000;
    RAM[144] =	8'b00000000;
    RAM[145] =	8'b00000000;
    RAM[146] =	8'b00000000;
    RAM[147] =	8'b00000000;
    RAM[148] =	8'b00000000;
    RAM[149] =	8'b00000000;
    RAM[150] =	8'b00000000;
    RAM[151] =	8'b00000000;
    RAM[152] =	8'b00000000;
    RAM[153] =	8'b00000000;
    RAM[154] =	8'b00000000;
    RAM[155] =	8'b00000000;
    RAM[156] =	8'b00000000;
    RAM[157] =	8'b00000000;
    RAM[158] =	8'b00000000;
    RAM[159] =	8'b00000000;
    RAM[160] =	8'b00000000;
    RAM[161] =	8'b00000000;
    RAM[162] =	8'b00000000;
    RAM[163] =	8'b00000000;
    RAM[164] =	8'b00000000;
    RAM[165] =	8'b00000000;
    RAM[166] =	8'b00000000;
    RAM[167] =	8'b00000000;
    RAM[168] =	8'b00000000;
    RAM[169] =	8'b00000000;
    RAM[170] =	8'b00000000;
    RAM[171] =	8'b00000000;
    RAM[172] =	8'b00000000;
    RAM[173] =	8'b00000000;
    RAM[174] =	8'b00000000;
    RAM[175] =	8'b00000000;
    RAM[176] =	8'b00000000;
    RAM[177] =	8'b00000000;
    RAM[178] =	8'b00000000;
    RAM[179] =	8'b00000000;
    RAM[180] =	8'b00000000;
    RAM[181] =	8'b00000000;
    RAM[182] =	8'b00000000;
    RAM[183] =	8'b00000000;
    RAM[184] =	8'b00000000;
    RAM[185] =	8'b00000000;
    RAM[186] =	8'b00000000;
    RAM[187] =	8'b00000000;
    RAM[188] =	8'b00000000;
    RAM[189] =	8'b00000000;
    RAM[190] =	8'b00000000;
    RAM[191] =	8'b00000000;
    RAM[192] =	8'b00000000;
    RAM[193] =	8'b00000000;
    RAM[194] =	8'b00000000;
    RAM[195] =	8'b00000000;
    RAM[196] =	8'b00000000;
    RAM[197] =	8'b00000000;
    RAM[198] =	8'b00000000;
    RAM[199] =	8'b00000000;
    RAM[200] =	8'b00000000;
    RAM[201] =	8'b00000000;
    RAM[202] =	8'b00000000;
    RAM[203] =	8'b00000000;
    RAM[204] =	8'b00000000;
    RAM[205] =	8'b00000000;
    RAM[206] =	8'b00000000;
    RAM[207] =	8'b00000000;
    RAM[208] =	8'b00000000;
    RAM[209] =	8'b00000000;
    RAM[210] =	8'b00000000;
    RAM[211] =	8'b00000000;
    RAM[212] =	8'b00000000;
    RAM[213] =	8'b00000000;
    RAM[214] =	8'b00000000;
    RAM[215] =	8'b00000000;
    RAM[216] =	8'b00000000;
    RAM[217] =	8'b00000000;
    RAM[218] =	8'b00000000;
    RAM[219] =	8'b00000000;
    RAM[220] =	8'b00000000;
    RAM[221] =	8'b00000000;
    RAM[222] =	8'b00000000;
    RAM[223] =	8'b00000000;
    RAM[224] =	8'b00000000;
    RAM[225] =	8'b00000000;
    RAM[226] =	8'b00000000;
    RAM[227] =	8'b00000000;
    RAM[228] =	8'b00000000;
    RAM[229] =	8'b00000000;
    RAM[230] =	8'b00000000;
    RAM[231] =	8'b00000000;
    RAM[232] =	8'b00000000;
    RAM[233] =	8'b00000000;
    RAM[234] =	8'b00000000;
    RAM[235] =	8'b00000000;
    RAM[236] =	8'b00000000;
    RAM[237] =	8'b00000000;
    RAM[238] =	8'b00000000;
    RAM[239] =	8'b00000000;
    RAM[240] =	8'b00000000;
    RAM[241] =	8'b00000000;
    RAM[242] =	8'b00000000;
    RAM[243] =	8'b00000000;
    RAM[244] =	8'b00000000;
    RAM[245] =	8'b00000000;
    RAM[246] =	8'b00000000;
    RAM[247] =	8'b00000000;
    RAM[248] =	8'b00000000;
    RAM[249] =	8'b00000000;
    RAM[250] =	8'b00000000;
    RAM[251] =	8'b00000000;
    RAM[252] =	8'b00000000;
    RAM[253] =	8'b00000000;
    RAM[254] =	8'b00000000;
    RAM[255] =	8'b00000000;
    RAM[256] =	8'b00000000;
    RAM[257] =	8'b00000000;
    RAM[258] =	8'b00000000;
    RAM[259] =	8'b00000000;
    RAM[260] =	8'b00000000;
    RAM[261] =	8'b00000000;
    RAM[262] =	8'b00000000;
    RAM[263] =	8'b00000000;
    RAM[264] =	8'b00000000;
    RAM[265] =	8'b00000000;
    RAM[266] =	8'b00000000;
    RAM[267] =	8'b00000000;
    RAM[268] =	8'b00000000;
    RAM[269] =	8'b00000000;
    RAM[270] =	8'b00000000;
    RAM[271] =	8'b00000000;
    RAM[272] =	8'b00000000;
    RAM[273] =	8'b00000000;
    RAM[274] =	8'b00000000;
    RAM[275] =	8'b00000000;
    RAM[276] =	8'b00000000;
    RAM[277] =	8'b00000000;
    RAM[278] =	8'b00000000;
    RAM[279] =	8'b00000000;
    RAM[280] =	8'b00000000;
    RAM[281] =	8'b00000000;
    RAM[282] =	8'b00000000;
    RAM[283] =	8'b00000000;
    RAM[284] =	8'b00000000;
    RAM[285] =	8'b00000000;
    RAM[286] =	8'b00000000;
    RAM[287] =	8'b00000000;
    RAM[288] =	8'b00000000;
    RAM[289] =	8'b00000000;
    RAM[290] =	8'b00000000;
    RAM[291] =	8'b00000000;
    RAM[292] =	8'b00000000;
    RAM[293] =	8'b00000000;
    RAM[294] =	8'b00000000;
    RAM[295] =	8'b00000000;
    RAM[296] =	8'b00000000;
    RAM[297] =	8'b00000000;
    RAM[298] =	8'b00000000;
    RAM[299] =	8'b00000000;
  end

  assign vdata = RAM[vaddr[8:0]]; 
  assign read_data = RAM[addr[8:0]]; // word aligned
  
  always_ff @(posedge clk) 
    if (mem_write) 
	 begin
		RAM[addr[8:0]] <= write_data;
	end
endmodule


// Modulo de memoria das instruÃ§oes
module imem(input  logic [31:0] pc,
            output logic [31:0] instr);

  logic [31:0] RAM[64:0];
 
  initial begin
		RAM[0]  = 32'h00000493;
		RAM[1]  = 32'h0200006f;
		RAM[2]  = 32'h000007b7;
		RAM[3]  = 32'h00078713;
		RAM[4]  = 32'h00249793;
		RAM[5]  = 32'h00f707b3;
		RAM[6]  = 32'h00f00713;
		RAM[7]  = 32'h00e7a023;
		RAM[8]  = 32'h00148493;
		RAM[9]  = 32'h000027b7;
		RAM[10] = 32'h00078793;
		RAM[11] = 32'h57f78793;
		RAM[12] = 32'hfc97dce3;
		RAM[13] = 32'h00000793;
		RAM[14] = 32'h00f00533;
		RAM[15] = 32'h00008067;
  end
  

  assign instr = RAM[pc[31:2]]; // word aligned
endmodule